{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Card,CardHeader,CardTitle,CardContent}from'../components/ui/Card';import{Button}from'../components/ui/Button';import{Alert}from'../components/ui/Alert';import api from'../api/axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserManagement=()=>{const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{fetchUsers();},[]);const fetchUsers=async()=>{try{const response=await api.get('/api/users');setUsers(response.data.users||[]);setError('');}catch(err){setError('Failed to fetch users');}finally{setLoading(false);}};const handleDisconnectUser=async userId=>{try{await api.post(`/api/users/${userId}/disconnect`);fetchUsers();// Refresh the list\n}catch(err){setError('Failed to disconnect user');}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:\"Loading users...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"User Management\"}),/*#__PURE__*/_jsx(Button,{onClick:fetchUsers,children:\"Refresh\"})]}),error&&/*#__PURE__*/_jsx(Alert,{type:\"error\",children:error}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsx(CardTitle,{children:\"Active Users\"})}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"IP Address\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"MAC Address\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Session Start\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Data Used\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Time Remaining\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Plan\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm\",children:user.ip}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-mono\",children:user.mac}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:new Date(user.session_start).toLocaleTimeString()}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm\",children:[(user.data_used/(1024*1024)).toFixed(1),\" MB\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm\",children:[Math.floor(user.time_remaining/60),\" min\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm\",children:user.plan}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm\",children:/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"danger\",onClick:()=>handleDisconnectUser(user.id),children:\"Disconnect\"})})]},user.id))})]})}),users.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"No active users found\"})]})]})]});};export default UserManagement;","map":{"version":3,"names":["React","useState","useEffect","Card","CardHeader","CardTitle","CardContent","Button","Alert","api","jsx","_jsx","jsxs","_jsxs","UserManagement","users","setUsers","loading","setLoading","error","setError","fetchUsers","response","get","data","err","handleDisconnectUser","userId","post","className","children","onClick","type","map","user","ip","mac","Date","session_start","toLocaleTimeString","data_used","toFixed","Math","floor","time_remaining","plan","size","variant","id","length"],"sources":["/home/maundu/Documents/PROJECTS/bytebill/frontend/src/pages/UserManagement.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Card, CardHeader, CardTitle, CardContent } from '../components/ui/Card';\nimport { Button } from '../components/ui/Button';\nimport { Alert } from '../components/ui/Alert';\nimport api from '../api/axios';\n\nconst UserManagement = () => {\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  const fetchUsers = async () => {\n    try {\n      const response = await api.get('/api/users');\n      setUsers(response.data.users || []);\n      setError('');\n    } catch (err) {\n      setError('Failed to fetch users');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDisconnectUser = async (userId) => {\n    try {\n      await api.post(`/api/users/${userId}/disconnect`);\n      fetchUsers(); // Refresh the list\n    } catch (err) {\n      setError('Failed to disconnect user');\n    }\n  };\n\n  if (loading) {\n    return <div className=\"flex items-center justify-center h-64\">Loading users...</div>;\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">User Management</h1>\n        <Button onClick={fetchUsers}>Refresh</Button>\n      </div>\n\n      {error && <Alert type=\"error\">{error}</Alert>}\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Active Users</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">IP Address</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">MAC Address</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Session Start</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Data Used</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Time Remaining</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Plan</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {users.map((user) => (\n                  <tr key={user.id}>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm\">{user.ip}</td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-mono\">{user.mac}</td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                      {new Date(user.session_start).toLocaleTimeString()}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                      {(user.data_used / (1024 * 1024)).toFixed(1)} MB\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                      {Math.floor(user.time_remaining / 60)} min\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm\">{user.plan}</td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                      <Button \n                        size=\"sm\" \n                        variant=\"danger\"\n                        onClick={() => handleDisconnectUser(user.id)}\n                      >\n                        Disconnect\n                      </Button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n          {users.length === 0 && (\n            <div className=\"text-center py-8 text-gray-500\">\n              No active users found\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n\nexport default UserManagement;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}